# API –°–µ—Ä–≤–µ—Ä –¥–ª—è –õ–∏–Ω–µ–π–Ω–æ–π –†–µ–≥—Ä–µ—Å—Å–∏–∏

–ü—Ä–æ—Å—Ç–æ–π API-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ FastAPI –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –∏–∑ sklearn.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
project/

‚îú‚îÄ‚îÄ app/
  
  ‚îú‚îÄ‚îÄ server.py # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ API
  
  ‚îî‚îÄ‚îÄ ml_tools.py # –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ú–û

‚îú‚îÄ‚îÄ models/

‚Äã	‚îú‚îÄ‚îÄ model.joblib # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å

‚Äã	‚îî‚îÄ‚îÄ model_info.json # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏ –º–µ—Ç—Ä–∏–∫–∏

‚îú‚îÄ‚îÄ .env # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

‚îú‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

‚îú‚îÄ‚îÄ README.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª

‚îî‚îÄ‚îÄ client.py # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

python -m venv venv
venv\Scripts\activate

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

pip install -r requirements.txt

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–µ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `models/`:
- `model.joblib` - –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- `model_info.json` - —Ñ–∞–π–ª —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏ –∏ R¬≤ score

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥ `lin_reg.py`.

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

SERVER_HOST=127.0.0.1
SERVER_PORT=8000
MODEL_PATH=../models/model.joblib
MODEL_INFO_PATH=../models/model_info.json

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python -m uvicorn app.server:app --reload --host 127.0.0.1 --port 8000

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://127.0.0.1:8000`

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- http://127.0.0.1:8000/docs
- http://127.0.0.1:8000/redoc

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –°–ø–æ—Å–æ–± ‚Ññ1: –ò—Å–ø–æ–ª—å–∑—É—è –∫–ª–∏–µ–Ω—Ç

python client.py
–ö–ª–∏–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤—ã–≤–µ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

### –°–ø–æ—Å–æ–± ‚Ññ2: –ò—Å–ø–æ–ª—å–∑—É—è –±—Ä–∞—É–∑–µ—Ä

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

http://127.0.0.1:8000/ping
–û—Ç–≤–µ—Ç:

```
{"status":"ok"}
```



#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏

http://127.0.0.1:8000/api/v1/model_info

#### –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (POST)

http://127.0.0.1:8000/api/v1/prediction

```
-H "Content-Type: application/json"
-d '{"features": [1.5, 2.3, -0.5, 1.0]}'
```




#### –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (GET)

curl "http://127.0.0.1:8000/api/v1/prediction?features=1.5,2.3,-0.5,1.0"

# –û–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### GET /ping
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞.

**–û—Ç–≤–µ—Ç:**

```
{"status": "ok"}
```



### POST /api/v1/prediction
–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (POST –∑–∞–ø—Ä–æ—Å).

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```
{"features": [1.5, 2.3, -0.5, 1.0]}
```

**–û—Ç–≤–µ—Ç:**

```
{
"prediction": 42.5,
"feature_names": ["x1", "x2", "x3", "x4"]
}
```



### GET /api/v1/prediction
–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (GET –∑–∞–ø—Ä–æ—Å).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `features` (—Å—Ç—Ä–æ–∫–∞): –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –∑–∞–ø—è—Ç—ã–º–∏

**–ü—Ä–∏–º–µ—Ä:**

```
/api/v1/prediction?features=1.5,2.3,-0.5,1.0
```

**–û—Ç–≤–µ—Ç:**

```
{
"prediction": 42.5,
"feature_names": ["x1", "x2", "x3", "x4"]
}
```



### GET /api/v1/model_info
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥–µ–ª–∏.

**–û—Ç–≤–µ—Ç:**

```
{
"coefficients": [10.5, 20.3, -5.2, 15.1],
"intercept": 5.0,
"r2_score": 0.95,
"feature_names": ["x1", "x2", "x3", "x4"]
}
```

